<link rel="import" href="../../polymer/polymer.html">

<polymer-element name="image-mask" attributes="shape size src href">
	<template>
	    <svg width="{{size}}" height="{{size}}" viewBox="0 0 {{size}} {{size}}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">		
			<g>
				<clipPath id="{{shape}}">

				    <template if="{{shape == 'circle'}}">
						<circle r="50%" cx="50%" cy="50%"/>
					</template>

				    <template if="{{shape == 'triangle'}}">
						<polygon points="0,{{size}} {{size/2}},0 {{size}},{{size}}" />
					</template>

				    <template if="{{shape == 'square'}}">
						<rect x="0" y="0" width="{{size}}" height="{{size}}" />
					</template>					

				    <template if="{{shape == 'rhombus'}}">
						<polygon points="{{size}},{{size/2}} {{size/2}},{{size}} 0,{{size/2}} {{size/2}},0" />
					</template>

				    <template if="{{shape == 'hexagon'}}">
						<polygon points="{{size/1.155}},{{size/1.33}} {{size/2.3}},{{size}} 0,{{size/1.33}} 0,{{size/4}} {{size/2.3}},0 {{size/1.155}},{{size/4}}" />
					</template>

				    <template if="{{shape == 'ios-app'}}">
            			<path d="M114,60.4263301 L114,60.8826834 L113.99632,64.0771565 L113.99632,64.5335098 L113.99632,67.7353435 L113.99632,68.1843363 L113.985279,71.3972107 L113.985279,71.8278022 L113.963197,75.0737991 L113.955837,75.4528667 L113.904313,78.7835098 L113.790225,82.5484246 L113.768143,83.0379003 L113.598851,86.0557206 L113.573089,86.4200671 L113.304429,89.4121255 L113.249225,89.8758394 L113.1793,90.4646823 L112.866477,92.6286803 L112.708226,93.5303461 L112.443246,94.8515625 L112.255553,95.6722624 L111.858084,97.1848528 L111.442213,98.5134298 L110.85337,100.088585 L110.533187,100.835679 L110.106276,101.733665 L109.112603,103.496513 L108.435434,104.490186 L107.55953,105.601627 L106.444409,106.794034 L105.741477,107.441761 L104.883975,108.141012 L103.651085,109.009556 L102.782541,109.543195 L101.303073,110.319731 L100.040741,110.875452 L99.1206741,111.228758 L98.7011235,111.379649 L97.3983084,111.795519 L95.8709969,112.207709 L95.4551265,112.307076 L94.7963585,112.454287 L92.8347753,112.833355 L91.7932593,112.995287 L90.3984375,113.186661 L89.6219008,113.278667 L88.131392,113.433239 L86.3427815,113.580449 L84.4695248,113.698218 L82.7950026,113.779184 L80.8076575,113.852789 L79.2472237,113.893272 L78.6878228,113.907993 L77.1457903,113.933755 L75.647921,113.955837 L74.9707515,113.963197 L73.4802428,113.974238 L72.0118156,113.985279 L71.2831224,113.985279 L69.8183755,113.992639 L68.3609892,113.99632 L67.6138946,113.99632 L66.1565083,113.99632 L64.7028022,113.99632 L63.9483471,113.99632 L62.494641,113.99632 L61.0409349,114 L60.2864799,114 L58.8327738,113.99632 L57.3790677,114 L56.6209323,114 L55.1672262,113.99632 L53.7135201,114 L52.9590651,114 L51.505359,113.99632 L50.0516529,113.99632 L49.2971978,113.99632 L47.8434917,113.99632 L46.3861054,113.99632 L45.6390108,113.99632 L44.1816245,113.992639 L42.7168776,113.985279 L41.9881844,113.985279 L40.5197572,113.974238 L39.0292485,113.963197 L38.352079,113.955837 L36.85789,113.933755 L35.3121772,113.907993 L34.7527763,113.893272 L33.1923425,113.852789 L31.5362216,113.793905 L29.5304752,113.698218 L27.7345041,113.58413 L25.868608,113.433239 L24.3780992,113.278667 L23.6015625,113.186661 L22.2067407,112.995287 L21.1652247,112.833355 L19.2073218,112.454287 L18.5448735,112.307076 L18.1290031,112.207709 L16.6016916,111.795519 L15.2988765,111.379649 L14.8793259,111.228758 L13.9592588,110.875452 L12.6969267,110.319731 L11.2174587,109.543195 L10.3489153,109.009556 L9.11602531,108.141012 L8.25852273,107.441761 L7.55559143,106.794034 L6.44047004,105.601627 L5.56456612,104.490186 L4.88739669,103.496513 L3.89372417,101.733665 L3.59930269,101.130101 L3.14662965,100.088585 L2.55778667,98.5134298 L2.14191632,97.1848528 L1.74444731,95.6722624 L1.55675362,94.8515625 L1.29177428,93.5303461 L1.13352273,92.6286803 L0.820699897,90.4646823 L0.750774793,89.8758394 L0.695570764,89.4121255 L0.426911157,86.4200671 L0.401149277,86.0557206 L0.231856921,83.0379003 L0.20977531,82.5889075 L0.0993672521,79.0484892 L0.0441632231,75.4528667 L0.036802686,75.0737991 L0.0147210744,71.8278022 L0.0147210744,71.3972107 L0.0036802686,68.1843363 L0.0036802686,67.7353435 L0.0036802686,64.5335098 L0.0036802686,64.0771565 L0,60.8826834 L0,60.4263301 L0,57.2281767 L0,56.7718233 L0,53.5736699 L0,53.1173166 L0.0036802686,49.9228435 L0.0036802686,49.4664902 L0.0036802686,46.2646565 L0.0036802686,45.8156637 L0.0147210744,42.6027893 L0.0147210744,42.1721978 L0.036802686,38.9262009 L0.0441632231,38.5471333 L0.0956869835,35.2164902 L0.20977531,31.4515754 L0.231856921,30.9620997 L0.401149277,27.9442794 L0.426911157,27.5799329 L0.695570764,24.5878745 L0.750774793,24.1241606 L0.820699897,23.5353177 L1.13352273,21.3713197 L1.29177428,20.4696539 L1.55675362,19.1484375 L1.74444731,18.3277376 L2.14191632,16.8151472 L2.55778667,15.4865702 L3.14662965,13.9114153 L3.46681302,13.1643208 L3.89372417,12.2663352 L4.88739669,10.5034866 L5.56456612,9.50981405 L6.44047004,8.39837293 L7.55559143,7.20596591 L8.25852273,6.55823864 L9.11602531,5.8589876 L10.3489153,4.99044421 L11.2174587,4.45680527 L12.6969267,3.6802686 L13.9592588,3.12454804 L14.8793259,2.77124225 L15.2988765,2.62035124 L16.6016916,2.20448089 L18.1290031,1.79229081 L18.5448735,1.69292355 L19.2073218,1.54571281 L21.1652247,1.16664514 L22.2067407,1.00471333 L23.6015625,0.81333936 L24.3780992,0.721332645 L25.868608,0.566761364 L27.6572185,0.41955062 L29.5304752,0.301782025 L31.2049974,0.220816116 L33.1923425,0.147210744 L34.7527763,0.106727789 L35.3121772,0.0920067149 L36.85789,0.0662448347 L38.352079,0.0441632231 L39.0292485,0.036802686 L40.5197572,0.0257618802 L41.9881844,0.0147210744 L42.7168776,0.0147210744 L44.1816245,0.00736053719 L45.6390108,0.0036802686 L46.3861054,0.0036802686 L47.8434917,0.0036802686 L49.2971978,0.0036802686 L50.0516529,0.0036802686 L51.505359,0.0036802686 L52.9590651,0 L53.7135201,0 L55.1672262,0.0036802686 L56.6209323,0 L57.3790677,0 L58.8327738,0.0036802686 L60.2864799,0 L61.0409349,0 L62.494641,0.0036802686 L63.9483471,0.0036802686 L64.7028022,0.0036802686 L66.1565083,0.0036802686 L67.6138946,0.0036802686 L68.3609892,0.0036802686 L69.8183755,0.00736053719 L71.2831224,0.0147210744 L72.0118156,0.0147210744 L73.4802428,0.0257618802 L74.9707515,0.036802686 L75.647921,0.0441632231 L77.1457903,0.0662448347 L78.6878228,0.0920067149 L79.2472237,0.106727789 L80.8076575,0.147210744 L82.4637784,0.206095041 L84.4695248,0.301782025 L86.2654959,0.415870351 L88.131392,0.566761364 L89.6219008,0.721332645 L90.3984375,0.81333936 L91.7932593,1.00471333 L92.8347753,1.16664514 L94.7963585,1.54571281 L95.4551265,1.69292355 L95.8709969,1.79229081 L97.3983084,2.20448089 L98.7011235,2.62035124 L99.1206741,2.77124225 L100.040741,3.12454804 L101.303073,3.6802686 L102.782541,4.45680527 L103.651085,4.99044421 L104.883975,5.8589876 L105.741477,6.55823864 L106.444409,7.20596591 L107.55953,8.39837293 L108.435434,9.50981405 L109.112603,10.5034866 L110.106276,12.2663352 L110.400697,12.8698993 L110.85337,13.9114153 L111.442213,15.4865702 L111.858084,16.8151472 L112.255553,18.3277376 L112.443246,19.1484375 L112.708226,20.4696539 L112.866477,21.3713197 L113.1793,23.5353177 L113.249225,24.1241606 L113.304429,24.5878745 L113.573089,27.5799329 L113.598851,27.9442794 L113.768143,30.9620997 L113.790225,31.4110925 L113.900633,34.9515108 L113.955837,38.5471333 L113.963197,38.9262009 L113.985279,42.1721978 L113.985279,42.6027893 L113.99632,45.8156637 L113.99632,46.2646565 L113.99632,49.4664902 L113.99632,49.9228435 L114,53.1173166 L114,53.5736699 L114,56.7718233 L114,60.4263301 Z M114,60.4263301"></path>
					</template>

				</clipPath>
			</g>
			<a xlink:href="{{href}}" id="link">
				<image clip-path="url(#{{shape}})" height="100%" width="100%" xlink:href="{{src}}"  preserveAspectRatio="xMidYMin slice" />
			</a>
		</svg>
    </template>
    <script>
        Polymer("image-mask", {
			shape: "circle",
			size: "320",
			ready: function() {
				if(!this.href) {
					this.href = this.$.link.removeAttribute("xlink:href");
				}
				if(!this.src) {
					this.src = "http://placehold.it/" + this.size;
				}
			}
		});
    </script>
</polymer-element>
